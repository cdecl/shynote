# SHYNOTE 상세 기능 명세 (Detailed Features)

SHYNOTE의 모든 기능을 계층별로 세분화하여 정리한 문서입니다.

## 1. 코어 아키텍처 및 동기화 (Core & Sync)

### 🔄 Local-First 동기화 엔진
- **IndexedDB 기반 작업 엔진**: 모든 데이터 처리는 로컬 DB(`SHYNOTE_VAULT`)에서 선행되어 네트워크 지연 없는 작업이 가능합니다.
- **WAL (Write-Ahead Logging)**: 모든 변경 사항은 `pending_logs`에 순차적으로 기록된 후 비동기로 서버에 반영됩니다.
- **지능형 합수(Merge) 로직**:
  - **Content Hash**: 문서의 해시값을 비교하여 변경 여부를 정확히 판단합니다.
  - **낙관적 UI**: 서버 응답을 기다리지 않고 즉시 UI를 갱신합니다.
  - **자가 치유(Self-Healing)**: 서버 데이터 불일치 시 Upsert로 자동 복구합니다.
- **Web Locks 기반 리더 선출**: 여러 탭 실행 시 단 하나의 탭만 동기화를 수행하여 중복 전송과 경합을 방지합니다.

### 🧩 No-Build & Modern Web
- **Native ESM**: 별도의 빌드 도구 없이 브라우저 기본 ES Modules를 사용하여 즉각적인 로딩을 지원합니다.
- **PWA (Progressive Web App)**: Service Worker를 통해 오프라인 캐싱 및 독립적인 앱 설치(Standalone)를 지원합니다.
- **Vite Vendor 번들링**: 무거운 외부 라이브러리는 미리 번들링하여 초기 로딩 속도를 최적화했습니다.

---

## 2. 노트 및 폴더 관리 (Management & Org)

### 📂 계층형 관리 시스템
- **폴더 트리**: 중첩 가능한 폴더링과 드래그 앤 드롭 이동을 지원합니다.
- **Inbox & Trash**: 분류되지 않은 노트용 Inbox와 안전한 삭제를 위한 휴지통(Tombstone 방식) 시스템을 제공합니다.
- **중요 노트 고정(Pin)**: 자주 사용하는 노트를 리스트 상단에 고정하며, 별도의 핀 전용 섹션을 제공합니다.

### 🛠 효율적인 관리 도구
- **다중 선택 (Multi-Select)**: 고무줄 드래그(Rubberband) 또는 `Cmd/Ctrl+클릭`을 통한 대량 이동 및 삭제 기능을 제공합니다.
- **제목 자동 생성**: 첫 줄 내용이나 생성 시각(YYYY-MM-DD HH:MM)을 기반으로 제목을 자동 제안합니다.
- **데이터 백업 및 복원**: 전체 데이터의 JSON 백업 및 복원 기능을 통해 데이터 주권을 보장합니다.

---

## 3. 고성능 마크다운 에디터 (Advanced Editor)

### ✍️ 고도의 편집 기능 (CodeMirror 6)
- **VS Code 스타일 단축키**: 줄 이동(`Alt+↑/↓`), 줄 복제, 다중 커서(`Alt+클릭`) 등 전문 개발 도구급 편집 경험을 제공합니다.
- **단축키 및 마우스 가이드**: 자세한 활용법은 **[이 문서](keyboard_mouse_guide.md)**를 참고하세요.
- **박스 선택 (Rectangular Selection)**: `Shift+Alt+드래그`를 통한 행 단위 일괄 편집이 가능합니다.
- **스마트 리스트**: 입력 중 엔터 시 자동 불렛/숫자 번호 매기기를 지원합니다.
- **특화 아이콘**: 파일 유형별, 상태별 동적 아이콘(Material Symbols) 시스템을 적용했습니다.

### 📊 특화 도구 (Specialized Tools)
- **Ultra-thin Table Editor**:
  - 마크다운 표 내 더블클릭 시 팝업 에디터 활성화.
  - 컬럼별 정렬(좌/중/우) 시각적 토글 및 실시간 마크다운 포맷팅.
- **슬래시(`/`) 커맨드 및 자동 완성**:
  - `/table`, `/datetime`, `/lorem` 등 템플릿 즉시 삽입.
  - 변수(`$user`, `$date`) 및 동적 스니펫 지원.
- **Mermaid.js 다이어그램**: 순서도, 시퀀스 다이어그램 등의 실시간 렌더링을 지원합니다.

---

## 4. 탐색 및 사용자 경험 (Navigation & UX)

### ⌨️ 통합 커맨드 팔레트 (Cmd+P)
- **스마트 검색**:
  - **Fuzzy Matching**: 오타나 비연속적 키워드도 유연하게 검색(Scoring 방식).
  - **사용 이력 기반**: 최근 사용 빈도와 접근 시각을 분석해 최적의 결과 우선 배치.
- **통합 명령 실행**: 노트 이동뿐 아니라 테마 전환, 줌 조절, 동기화 등 모든 명령을 키보드로 실행합니다.

### 🔗 지능형 연결 (Smart Connections)
- **백링크(Backlink) 기능**:
  - **양방향 연결**: 위키 스타일 링크(`[[노트 제목]]` 또는 `[[제목|id:UUID]]`)를 통해 노트 간 연결을 지원합니다.
  - **참조 목록 표시**: 현재 노트를 링크한 다른 노트 목록을 에디터 하단에 실시간으로 표시합니다.
  - **상태 기반 정렬**: 정상 연결된 노트를 우선 표시하고, 삭제된 노트를 가리키는 'Broken Link'는 별도로 구분하여 하단에 배치합니다.
- **최근 작업 노트 (Recent Notes)**:
  - **빠른 접근**: 사이드바 하단에 최근에 열어본 노트 5개를 고정 표시합니다.
  - **사용자 패턴 분석**: `localStorage`를 통해 노트별 접근 횟수와 마지막 사용 시각을 기록하여 자동으로 리스트를 갱신합니다.

### 📱 반응형 및 전용 UI
- **고밀도 그리드(Grid)**: 카드 너비 최적화를 통해 많은 정보를 한눈에 표시(모바일 2열 자동 대응).
- **컴팩트 리스트(List)**: 수백 개의 노트를 빠르게 탐색할 수 있는 압축형 행 레이아웃.
- **모바일 최적화 제스처**: 좌우 스와이프를 통한 사이드바 개폐 및 뷰 모드 전환.
- **시각적 테마**: GitHub Light 및 Nord Dark 테마를 지원하며, 시스템 설정에 연동됩니다.

---

## 5. 인프라 및 배포 (Infra & Deployment)

### 🌐 클라우드 연동
- **FastAPI Backend**: 가볍고 빠른 Python 서버 레이어.
- **PostgreSQL (Vercel)**: 운영 환경의 안정적인 관리형 DB 사용.
- **Google OAuth 2.0**: JWT 기반의 안전한 세션 관리 및 소셜 로그인.

### 📦 도커 및 셀프 호스팅
- **Docker 기반 배포**: `Dockerfile` 및 빌드 스크립트를 통한 간편한 자체 서버 구축 지원.
- **플랫폼 독립성**: SQLite(개발/소규모)와 PostgreSQL(운영) 전환이 자유로운 아키텍처.

---

## 6. 프로젝트 진화 이력 (Evolution Milestones)

- **Phase 1**: 마크다운 렌더링 및 클라우드 연동 기초 구축.
- **Phase 2**: 에디터를 CodeMirror 6로 전격 마이그레이션 및 UI 고밀도화.
- **Phase 3**: Local-first 아키텍처 완성 및 오프라인 편집 기능 고도화.
- **Phase 4**: 커맨드 팔레트 및 스마트 검색 도입으로 탐색 엔진 혁신.
- **Phase 5**: 표 편집기, 자동 완성 등 전문 생산성 기능의 디테일 강화.
- **Phase 6**: 백링크(Backlink) 및 최근 작업 노트(Recent Notes) 도입으로 노트 간 연결성 및 탐색 효율 극대화.
